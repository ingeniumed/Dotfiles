version: "2.2"
services:
  
  watchtower:
    container_name: watchtower
    restart: always
    image: v2tec/watchtower
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    command: --schedule "0 0 4 * * SUN" --cleanup 
    cpus: '0.5'
    mem_limit: '500M'
  plex:
    image: linuxserver/plex:latest
    container_name: plex
    network_mode: host 
    environment:
      - PUID=1000
      - PGID=1000
      - VERSION=docker
    volumes:
      - ~/docker-configs/plex/config:/config
      - ~/storage/nas2/media:/mnt
    ports:
      - 32400:32400
    restart: unless-stopped
    cpus: '1'
    mem_limit: '2G'
  sabnzbd: 
    image: linuxserver/sabnzbd
    container_name: sabnzbd 
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=America/Toronto
    volumes:
      - ~/docker-configs/sabnzbd/config:/config
      - ~/storage/nas1/torrents/completed:/downloads
      - ~/storage/nas1/torrents/incomplete:/incomplete-downloads
    ports:
      - 8080:8080
    restart: unless-stopped
    cpus: '0.50'
    mem_limit: '400M'
  hydra2:
    image: linuxserver/hydra2
    container_name: hydra2
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=America/Toronto
    volumes:
      - ~/docker-configs/hydra2/config:/config
      - ~/storage/nas1/torrents:/downloads
    ports:
      - 5076:5076
    restart: unless-stopped
    cpus: '0.50'
    mem_limit: '500M'
  sonarr:
    image: linuxserver/sonarr
    container_name: sonarr
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=EST
    volumes:
      - ~/docker-configs/sonarr/config:/config
      - ~/storage/nas1/torrents/completed:/downloads
      - ~/storage/nas2/media/tv-shows:/tv
    ports:
      - 8989:8989 
    restart: unless-stopped
    cpus: '0.50'
    mem_limit: '500M'
  radarr:
    image: linuxserver/radarr
    container_name: radarr
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=EST
    volumes:
      - ~/docker-configs/radarr/config:/config
      - ~/storage/nas1/torrents/completed:/downloads
      - ~/storage/nas2/media/movies:/movies
    ports:
      - 7878:7878
    restart: unless-stopped
    cpus: '0.50'
    mem_limit: '500M' 
  ombi:
    image: linuxserver/ombi
    container_name: ombi
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=EST
    volumes:
      - ~/docker-configs/ombi/config:/config
    ports:
      - 3579:3579
    restart: unless-stopped
    cpus: '0.50'
    mem_limit: '500M'
  homebridge:
    image: oznu/homebridge:latest
    container_name: homebridge
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=EST
      - HOMEBRIDGE_CONFIG_UI=1
      - HOMEBRIDGE_CONFIG_UI_PORT=8000
    volumes:
      - ~/docker-configs/homebridge/config:/config
    restart: unless-stopped
    network_mode: host
    ports:
      - 8000:8000
      - 53838:53838
    cpus: '0.7'
    mem_limit: '700M'
